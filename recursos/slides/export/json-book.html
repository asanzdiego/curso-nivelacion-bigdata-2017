<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="description" content="JSON" />
  <meta name="author" content="Adolfo Sanz De Diego" />
  <title>JSON</title>
  <style type="text/css">code{white-space: pre; background-color: lightgrey;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">JSON</h1>
<h2 class="author">Adolfo Sanz De Diego</h2>
<h3 class="date">Octubre 2017</h3>
</header>
<nav id="TOC">
<ul>
<li><a href="#acerca-de"><span class="toc-section-number">1</span> Acerca de</a><ul>
<li><a href="#autor"><span class="toc-section-number">1.1</span> Autor</a></li>
<li><a href="#licencia"><span class="toc-section-number">1.2</span> Licencia</a></li>
<li><a href="#fuente"><span class="toc-section-number">1.3</span> Fuente</a></li>
</ul></li>
<li><a href="#introducción-a-json"><span class="toc-section-number">2</span> Introducción a JSON</a><ul>
<li><a href="#qué-es"><span class="toc-section-number">2.1</span> ¿Qué es?</a></li>
<li><a href="#parejas-clavevalor"><span class="toc-section-number">2.2</span> Parejas clave=valor</a></li>
<li><a href="#sintaxis-json"><span class="toc-section-number">2.3</span> Sintaxis JSON</a></li>
<li><a href="#valores-json"><span class="toc-section-number">2.4</span> Valores JSON</a></li>
<li><a href="#ejemplo-json"><span class="toc-section-number">2.5</span> Ejemplo JSON</a></li>
<li><a href="#ejemplo-api"><span class="toc-section-number">2.6</span> Ejemplo API</a></li>
</ul></li>
<li><a href="#json-desde-python"><span class="toc-section-number">3</span> JSON desde Python</a><ul>
<li><a href="#módulo-json"><span class="toc-section-number">3.1</span> Módulo JSON</a></li>
<li><a href="#tipos-permitidos"><span class="toc-section-number">3.2</span> Tipos permitidos</a></li>
<li><a href="#tipos-no-permitidos"><span class="toc-section-number">3.3</span> Tipos no permitidos</a></li>
<li><a href="#json-desde-cadena"><span class="toc-section-number">3.4</span> JSON desde cadena</a></li>
<li><a href="#diccionario"><span class="toc-section-number">3.5</span> Diccionario</a></li>
<li><a href="#sin-orden"><span class="toc-section-number">3.6</span> Sin orden</a></li>
<li><a href="#escribir-json"><span class="toc-section-number">3.7</span> Escribir JSON</a></li>
<li><a href="#ejemplos-de-procesamiento"><span class="toc-section-number">3.8</span> Ejemplos de procesamiento</a></li>
<li><a href="#enunciado-ejemplo-1"><span class="toc-section-number">3.9</span> Enunciado Ejemplo 1</a></li>
<li><a href="#recoger-json"><span class="toc-section-number">3.10</span> Recoger JSON</a></li>
<li><a href="#procesar-json"><span class="toc-section-number">3.11</span> Procesar JSON</a></li>
<li><a href="#ejemplos-1"><span class="toc-section-number">3.12</span> Ejemplos 1</a></li>
<li><a href="#enunciado-ejemplo-2"><span class="toc-section-number">3.13</span> Enunciado Ejemplo 2</a></li>
<li><a href="#crear-cuenta"><span class="toc-section-number">3.14</span> Crear cuenta</a></li>
<li><a href="#aceder-a-apps"><span class="toc-section-number">3.15</span> Aceder a apps</a></li>
<li><a href="#autenticarse"><span class="toc-section-number">3.16</span> Autenticarse</a></li>
<li><a href="#dentro-de-apps"><span class="toc-section-number">3.17</span> Dentro de apps</a></li>
<li><a href="#crear-nueva-app"><span class="toc-section-number">3.18</span> Crear nueva app</a></li>
<li><a href="#información-app"><span class="toc-section-number">3.19</span> Información app</a></li>
<li><a href="#crear-access-token"><span class="toc-section-number">3.20</span> Crear access token</a></li>
<li><a href="#valores-app"><span class="toc-section-number">3.21</span> Valores app</a></li>
<li><a href="#valores-importantes"><span class="toc-section-number">3.22</span> Valores importantes</a></li>
<li><a href="#programa-python"><span class="toc-section-number">3.23</span> Programa python</a></li>
<li><a href="#oauth.py"><span class="toc-section-number">3.24</span> oauth.py</a></li>
<li><a href="#hidden.py"><span class="toc-section-number">3.25</span> hidden.py</a></li>
<li><a href="#twurl.py"><span class="toc-section-number">3.26</span> twurl.py</a></li>
<li><a href="#twitter.py"><span class="toc-section-number">3.27</span> twitter.py</a></li>
<li><a href="#otros-datos"><span class="toc-section-number">3.28</span> Otros datos</a></li>
<li><a href="#código-twitter.py"><span class="toc-section-number">3.29</span> Código twitter.py</a></li>
</ul></li>
</ul>
</nav>
<h1 id="acerca-de"><span class="header-section-number">1</span> Acerca de</h1>
<h2 id="autor"><span class="header-section-number">1.1</span> Autor</h2>
<ul>
<li><strong>Adolfo Sanz De Diego</strong>
<ul>
<li>Blog: <a href="http://asanzdiego.blogspot.com.es/">asanzdiego.blogspot.com.es</a></li>
<li>Correo: <a href="mailto:asanzdiego@gmail.com">asanzdiego@gmail.com</a></li>
<li>GitHub: <a href="http://github.com/asanzdiego">github.com/asanzdiego</a></li>
<li>Twitter: <a href="http://twitter.com/asanzdiego">twitter.com/asanzdiego</a></li>
<li>LinkedIn: <a href="http://www.linkedin.com/in/asanzdiego">in/asanzdiego</a></li>
<li>SlideShare: <a href="http://www.slideshare.net/asanzdiego/">slideshare.net/asanzdiego</a></li>
</ul></li>
</ul>
<h2 id="licencia"><span class="header-section-number">1.2</span> Licencia</h2>
<ul>
<li><strong>Copyright:</strong>
<ul>
<li>Antonio Sarasa Cabezuelo &lt;<a href="mailto:antoniosarasa@campusciff.net">antoniosarasa@campusciff.net</a>&gt;</li>
</ul></li>
</ul>
<h2 id="fuente"><span class="header-section-number">1.3</span> Fuente</h2>
<ul>
<li>Las slides y sus fuentes las podéis encontrar en:
<ul>
<li><a href="https://github.com/asanzdiego/curso-intro-linux-web-sql-2016" class="uri">https://github.com/asanzdiego/curso-intro-linux-web-sql-2016</a></li>
</ul></li>
</ul>
<h1 id="introducción-a-json"><span class="header-section-number">2</span> Introducción a JSON</h1>
<h2 id="qué-es"><span class="header-section-number">2.1</span> ¿Qué es?</h2>
<ul>
<li>JSON (<strong>JavaScript Object Notation</strong>) es un formato de datos que se caracteriza:
<ul>
<li>Está basado en JavaScript.</li>
<li>Es utilizado para el intercambio de datos.</li>
<li>Es utilizado por muchas APIs de sitios web tales como Facebook, Twitter,... para devolver su contenido.</li>
<li>Es independiente del lenguaje</li>
<li>Los archivos tienen extensión .json</li>
</ul></li>
</ul>
<h2 id="parejas-clavevalor"><span class="header-section-number">2.2</span> Parejas clave=valor</h2>
<ul>
<li>JSON representa objetos de manera textual mediante <strong>parejas clave=valor</strong>,</li>
</ul>
<figure>
<img src="../img/json/json-01.png" alt="Ejemplo JSON" text-align="center" style="width:50.0%" /><figcaption>Ejemplo JSON</figcaption>
</figure>
<h2 id="sintaxis-json"><span class="header-section-number">2.3</span> Sintaxis JSON</h2>
<ul>
<li><p>Un objeto se representa como una secuencia de parejas clave=valor encerradas entre llaves { y }.</p></li>
<li><p>Las claves son cadenas de texto entre comillas &quot; y &quot;.</p></li>
</ul>
<h2 id="valores-json"><span class="header-section-number">2.4</span> Valores JSON</h2>
<ul>
<li>Tipos básicos: <strong>cadena, número, booleano, null</strong></li>
<li><strong>Arrays</strong> de valores: entre corchetes [ y ]</li>
<li>Otros <strong>objetos</strong> JSON: entre llaves { y }</li>
</ul>
<h2 id="ejemplo-json"><span class="header-section-number">2.5</span> Ejemplo JSON</h2>
<ul>
<li>Considerar el siguiente ejemplo dónde se quiere representar la ficha de un estudiante con sus datos personales y asignaturas matriculadas:
<ul>
<li>Nombre=&quot;Pepito Pérez&quot;</li>
<li>DNI=&quot;517899R&quot;</li>
<li>Edad=&quot;22&quot;</li>
</ul></li>
<li>Asignaturas matriculadas:
<ul>
<li>Obligatorias: Sistemas Operativos, Compiladores, y Bases de Datos.</li>
<li>Optativas: Bases de Datos NoSQL, Minería de Datos, Programación Lógica.</li>
<li>Libre Elección: Ajedrez, Música Clásica</li>
</ul></li>
<li>La ficha de información se puede representar en un documento JSON de la siguiente manera:</li>
</ul>
<figure>
<img src="../img/json/json-02.png" alt="Ejemplo JSON" text-align="center" style="width:50.0%" /><figcaption>Ejemplo JSON</figcaption>
</figure>
<h2 id="ejemplo-api"><span class="header-section-number">2.6</span> Ejemplo API</h2>
<ul>
<li><p><a href="http://jsonplaceholder.typicode.com/posts" class="uri">http://jsonplaceholder.typicode.com/posts</a></p></li>
<li><p><a href="http://jsonplaceholder.typicode.com/posts/1/comments" class="uri">http://jsonplaceholder.typicode.com/posts/1/comments</a></p></li>
</ul>
<h1 id="json-desde-python"><span class="header-section-number">3</span> JSON desde Python</h1>
<h2 id="módulo-json"><span class="header-section-number">3.1</span> Módulo JSON</h2>
<ul>
<li>Para gestionar Documentos JSON desde Python se usa el <strong>modulo JSON</strong> que permite la traducción de datos JSON en valores de Python.</li>
</ul>
<h2 id="tipos-permitidos"><span class="header-section-number">3.2</span> Tipos permitidos</h2>
<ul>
<li>JSON no puede almacenar cualquier tipo de valor Python, únicamente <strong>cadenas, enteros, reales, booleanos, listas, diccionarios y el tipo None</strong>.</li>
</ul>
<h2 id="tipos-no-permitidos"><span class="header-section-number">3.3</span> Tipos no permitidos</h2>
<ul>
<li>JSON no puede representar objetos específicos de Python tales como <strong>Ficheros, expresiones regulares, ...</strong></li>
</ul>
<h2 id="json-desde-cadena"><span class="header-section-number">3.4</span> JSON desde cadena</h2>
<ul>
<li>Para traducir una cadena que contiene datos JSON en un valor de Python se utiliza el <strong>método json.loads()</strong>.</li>
</ul>
<figure>
<img src="../img/json/json-03.png" alt="Cargar JSON" text-align="center" style="width:50.0%" /><figcaption>Cargar JSON</figcaption>
</figure>
<h2 id="diccionario"><span class="header-section-number">3.5</span> Diccionario</h2>
<ul>
<li><p>La llamada al método loads() del módulo json permite cargar una cadena de datos JSON en valores de Python, retornando como <strong>resultado un diccionario</strong>.</p></li>
<li><p>Si se quiere acceder a los distintos elementos del diccionario <strong>se usan los índices</strong>. La cadena JSON utiliza dobles comillas para las claves.</p></li>
</ul>
<h2 id="sin-orden"><span class="header-section-number">3.6</span> Sin orden</h2>
<ul>
<li>Observar que <strong>los valores en los diccionarios no están ordenados</strong>, por lo que los pares clave-valor pueden aparecer en orden diferente a como aparecían en la cadena original.</li>
</ul>
<h2 id="escribir-json"><span class="header-section-number">3.7</span> Escribir JSON</h2>
<ul>
<li>Para escribir un valor de Python como una cadena de datos JSON se usa el método json.dumps().</li>
</ul>
<figure>
<img src="../img/json/json-05.png" alt="Escribir JSON" text-align="center" style="width:50.0%" /><figcaption>Escribir JSON</figcaption>
</figure>
<h2 id="ejemplos-de-procesamiento"><span class="header-section-number">3.8</span> Ejemplos de procesamiento</h2>
<ul>
<li>Para comprender la utilidad y aplicación de los Documentos JSON se van a ver un par de ejemplos de procesamiento de documentos JSON desde el lenguaje de programación Python.</li>
</ul>
<h2 id="enunciado-ejemplo-1"><span class="header-section-number">3.9</span> Enunciado Ejemplo 1</h2>
<ul>
<li>Considerar un programa que permita:
<ul>
<li>Leer desde teclado una ciudad</li>
<li>Llamar a la API de geocodificación de Google</li>
<li>Extraer la información en formato JSON que nos devuelve.</li>
</ul></li>
</ul>
<h2 id="recoger-json"><span class="header-section-number">3.10</span> Recoger JSON</h2>
<ul>
<li>Mediante urllib se recupera el texto en JSON que la API de geocodificación de Google devuelve.</li>
</ul>
<figure>
<img src="../img/json/json-07.png" alt="Ejemplo 1 - recoger JSON" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 1 - recoger JSON</figcaption>
</figure>
<h2 id="procesar-json"><span class="header-section-number">3.11</span> Procesar JSON</h2>
<ul>
<li>Una vez recuperados los datos JSON se analizan y se muestran.</li>
</ul>
<figure>
<img src="../img/json/json-08.png" alt="Ejemplo 1 - procesar JSON" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 1 - procesar JSON</figcaption>
</figure>
<h2 id="ejemplos-1"><span class="header-section-number">3.12</span> Ejemplos 1</h2>
<figure>
<img src="../img/json/json-09.png" alt="Ejemplo 1 - completo" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 1 - completo</figcaption>
</figure>
<h2 id="enunciado-ejemplo-2"><span class="header-section-number">3.13</span> Enunciado Ejemplo 2</h2>
<ul>
<li>Twitter tiene una disponible una API con servicios para los usuarios. Para poder utilizar dicha API es necesario el uso de firmas Oauth (es una tecnología para firmar peticiones en Internet) en cada solicitud.</li>
</ul>
<h2 id="crear-cuenta"><span class="header-section-number">3.14</span> Crear cuenta</h2>
<ul>
<li>Si no se dispone de cuenta en twitter, entonces hay que crearse una cuenta en <a href="https://twitter.com/" class="uri">https://twitter.com/</a></li>
</ul>
<h2 id="aceder-a-apps"><span class="header-section-number">3.15</span> Aceder a apps</h2>
<ul>
<li>A continuación se navega a la dirección <a href="https://apps.twitter.com/" class="uri">https://apps.twitter.com/</a>, dónde habrá que autenticarse. Esta página da acceso a la api de twitter para desarrolladores.</li>
</ul>
<h2 id="autenticarse"><span class="header-section-number">3.16</span> Autenticarse</h2>
<ul>
<li>Nos autenticamos:</li>
</ul>
<figure>
<img src="../img/json/json-11.png" alt="Ejemplo 2 - autenticarse en twitter" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 2 - autenticarse en twitter</figcaption>
</figure>
<h2 id="dentro-de-apps"><span class="header-section-number">3.17</span> Dentro de apps</h2>
<ul>
<li>Una vez autenticados, se entra en la página principal:</li>
</ul>
<figure>
<img src="../img/json/json-12.png" alt="Ejemplo 2 - dentro de apps de twitter" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 2 - dentro de apps de twitter</figcaption>
</figure>
<h2 id="crear-nueva-app"><span class="header-section-number">3.18</span> Crear nueva app</h2>
<ul>
<li>Se selecciona &quot;Create New App&quot;, lo que abre un formulario que hay que rellenar.</li>
</ul>
<figure>
<img src="../img/json/json-13.png" alt="Ejemplo 2 - dentro de apps de twitter" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 2 - dentro de apps de twitter</figcaption>
</figure>
<h2 id="información-app"><span class="header-section-number">3.19</span> Información app</h2>
<ul>
<li>Cuando se pulsa sobre &quot;Create your Twitter application&quot; aparece una nueva página con la información de la aplicación.</li>
</ul>
<figure>
<img src="../img/json/json-14.png" alt="Ejemplo 2 - información de apps de twitter" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 2 - información de apps de twitter</figcaption>
</figure>
<h2 id="crear-access-token"><span class="header-section-number">3.20</span> Crear access token</h2>
<ul>
<li>Se pulsa sobre la solapa &quot;Keys and Access content&quot;, y en dicha página se busca la sección &quot;Your access token&quot; dónde se pulsa sobre la opción &quot;create my access token&quot;.</li>
</ul>
<figure>
<img src="../img/json/json-15.png" alt="Ejemplo 2 - crear access token de twitter" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 2 - crear access token de twitter</figcaption>
</figure>
<h2 id="valores-app"><span class="header-section-number">3.21</span> Valores app</h2>
<ul>
<li>Después de pulsar sobre la opción &quot;create my access token&quot; se han generado un conjunto de valores en la página.</li>
</ul>
<figure>
<img src="../img/json/json-16.png" alt="Ejemplo 2 - valores app de twitter" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 2 - valores app de twitter</figcaption>
</figure>
<h2 id="valores-importantes"><span class="header-section-number">3.22</span> Valores importantes</h2>
<ul>
<li>Los valores que son necesarios utilizar para acceder a los datos de twitter son:
<ul>
<li>api_key = &quot;Valor de la api key&quot;</li>
<li>api_secret = &quot;Valor de la api secret&quot;</li>
<li>access_token_key = &quot;Valor de la access token&quot;</li>
<li>access_token_secret = &quot;Valor de la access token secret&quot;</li>
</ul></li>
<li>Una vez que se disponen de estos valores, se crea un programa en python para recuperar datos de Twitter.</li>
</ul>
<h2 id="programa-python"><span class="header-section-number">3.23</span> Programa python</h2>
<ul>
<li>Se van a necesitar 4 programas:
<ul>
<li>oauth.py</li>
<li>twurl.py</li>
<li>hidden.py</li>
<li>twitter.py</li>
</ul></li>
</ul>
<h2 id="oauth.py"><span class="header-section-number">3.24</span> oauth.py</h2>
<ul>
<li>El programa oauth.py contiene una implementación del protocolo de firmas oauth.</li>
</ul>
<h2 id="hidden.py"><span class="header-section-number">3.25</span> hidden.py</h2>
<ul>
<li>El programa hidden.py contiene los parámetros para acceder a la API de twitter que se han debido copiar de la app creada en la API en la sección de &quot;Keys and Access content&quot;.</li>
</ul>
<figure>
<img src="../img/json/json-17.png" alt="Ejemplo 2 - hidden.py" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 2 - hidden.py</figcaption>
</figure>
<h2 id="twurl.py"><span class="header-section-number">3.26</span> twurl.py</h2>
<ul>
<li>El programa twurl.py es un programa auxiliar necesario para realizar la conexión.</li>
</ul>
<figure>
<img src="../img/json/json-18.png" alt="Ejemplo 2 - twurl.py" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 2 - twurl.py</figcaption>
</figure>
<h2 id="twitter.py"><span class="header-section-number">3.27</span> twitter.py</h2>
<ul>
<li><p>El programa twitter.py contiene el procesamiento buscado.</p></li>
<li><p>En este caso se recuperan los amigos de un usuario en Twitter, se analiza el JSON devuelto y se extrae parte de la información sobre esos amigos.</p></li>
</ul>
<h2 id="otros-datos"><span class="header-section-number">3.28</span> Otros datos</h2>
<ul>
<li><p>También recupera información de las cabeceras de respuesta HTTP.</p></li>
<li><p>En particular de x-rate-limit-remaining que informa sobre cuántas peticiones se pueden hacer antes de que ser bloqueados por un corto periodo de tiempo.</p></li>
</ul>
<h2 id="código-twitter.py"><span class="header-section-number">3.29</span> Código twitter.py</h2>
<figure>
<img src="../img/json/json-19.png" alt="Ejemplo 2 - twitter.py" text-align="center" style="width:50.0%" /><figcaption>Ejemplo 2 - twitter.py</figcaption>
</figure>
</body>
</html>
